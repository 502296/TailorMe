<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>Pickup Signature</title>

  <link rel="stylesheet" href="signature.css">

  <script src="signature.js"></script>

</head>

<body>

  <div class="form-container">

    <h1>Pickup Signature</h1>

    <form id="pickupForm">

      <label for="customer_name">Name:</label>

      <input type="text" id="customer_name" required>



      <label for="phone">Phone:</label>

      <input type="tel" id="phone" required>



      <label for="service">Service:</label>

      <select id="service" required>

        <option value="Alteration">Alteration</option>

        <option value="Custom Tailoring">Custom Tailoring</option>

      </select>



      <label for="pieces">Number of Pieces:</label>

      <input type="number" id="pieces" required>



      <label for="pickup_date">Pickup Date:</label>

      <input type="date" id="pickup_date" required>



      <label for="pickup_time">Pickup Time:</label>

      <input type="time" id="pickup_time" required>



      <label for="notes">Notes (optional):</label>

      <textarea id="notes"></textarea>



      <label>Signature:</label>

      <canvas id="signature-pad" width="300" height="150" style="border:1px solid #000;"></canvas><br>

      <button type="button" onclick="clearSignature()">Clear Signature</button><br><br>



      <button type="submit">Submit</button>

    </form>

  </div>



  <script>

    const canvas = document.getElementById("signature-pad");

    const ctx = canvas.getContext("2d");

    let isDrawing = false;



    canvas.addEventListener("mousedown", () => isDrawing = true);

    canvas.addEventListener("mouseup", () => isDrawing = false);

    canvas.addEventListener("mousemove", draw);



    function draw(e) {

      if (!isDrawing) return;

      ctx.lineWidth = 2;

      ctx.lineCap = "round";

      ctx.strokeStyle = "#000";

      ctx.lineTo(e.offsetX, e.offsetY);

      ctx.stroke();

      ctx.beginPath();

      ctx.moveTo(e.offsetX, e.offsetY);

    }



    function clearSignature() {

      ctx.clearRect(0, 0, canvas.width, canvas.height);

    }



    document.getElementById("pickupForm").addEventListener("submit", async function (e) {

      e.preventDefault();



      const data = {

        customer_name: document.getElementById("customer_name").value,

        phone: document.getElementById("phone").value,

        service: document.getElementById("service").value,

        pieces: document.getElementById("pieces").value,

        pickup_date: document.getElementById("pickup_date").value,

        pickup_time: document.getElementById("pickup_time").value,

        notes: document.getElementById("notes").value,

        signature: canvas.toDataURL()

      };



      try {

        const response = await fetch("https://script.google.com/macros/s/AKfycbyo1PzUGYJSlCzktI-5f4ptCk1J1i6Rk84UAH0YgDo6FHOfc7qTU5swTq8zB2bwas-wag/exec", {

          method: "POST",

          body: JSON.stringify(data),

          headers: {

            "Content-Type": "application/json"

          }

        });



        if (response.ok) {

          alert("Pickup confirmed and email sent successfully!");

          window.location.href = "thankyou.html";

        } else {

          alert("Something went wrong. Please try again.");

        }



      } catch (error) {

        console.error("Fetch error:", error);

        alert("Error sending data. Please check the console.");

      }

    });

  </script>

</body>

</html>
