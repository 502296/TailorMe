<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Pickup Signature</title>

  <link rel="stylesheet" href="appointment.css">

  <style>

    canvas {

      background-color: #fff;

      border: 2px solid gold;

      border-radius: 8px;

      width: 100%;

      height: 200px;

    }

    .signature-label {

      margin-top: 16px;

      font-weight: bold;

    }

    .button-row {

      display: flex;

      justify-content: space-between;

      margin-top: 20px;

    }

    .btn {

      padding: 12px 20px;

      border-radius: 6px;

      font-weight: bold;

      cursor: pointer;

      border: none;

    }

    .btn-save {

      background-color: gold;

      color: black;

      flex: 1;

      margin-right: 10px;

    }

    .btn-back {

      background-color: #222;

      color: white;

      flex: 1;

      margin-left: 10px;

    }

  </style>

</head>

<body>



  <div class="form-container">

    <h1>Pickup Signature</h1>



    <form id="pickupForm">



      <label for="customer_name">Customer Name:</label>

      <input type="text" id="customer_name" name="customer_name" required>



      <label for="pieces">Number of Pieces:</label>

      <input type="number" id="pieces" name="pieces" required>



      <label for="service_type">Service Type:</label>

      <select id="service_type" name="service_type" required>

        <option value="">Select...</option>

        <option value="Alteration">Alteration</option>

        <option value="Custom Tailoring">Custom Tailoring</option>

      </select>



      <label for="pickup_time">Pickup Date & Time:</label>

      <input type="datetime-local" id="pickup_time" name="pickup_time" required>



      <label for="notes">Notes (Optional):</label>

      <textarea id="notes" name="notes"></textarea>



      <label class="signature-label">Customer Signature:</label>

      <canvas id="signaturePad"></canvas>



      <div class="button-row">

        <button type="submit" class="btn btn-save">Save</button>

        <a href="appointment.html" class="btn btn-back" style="text-align: center;">← Back</a>

      </div>



    </form>

  </div>



  <script>

    const canvas = document.getElementById("signaturePad");

    const ctx = canvas.getContext("2d");

    let drawing = false;



    function resizeCanvas() {

      canvas.width = canvas.offsetWidth;

      canvas.height = 200;

    }



    window.addEventListener("resize", resizeCanvas);

    resizeCanvas();



    canvas.addEventListener("mousedown", () => drawing = true);

    canvas.addEventListener("mouseup", () => drawing = false);

    canvas.addEventListener("mouseout", () => drawing = false);

    canvas.addEventListener("mousemove", draw);



    function draw(e) {

      if (!drawing) return;

      ctx.lineWidth = 2;

      ctx.lineCap = "round";

      ctx.strokeStyle = "#000";



      const rect = canvas.getBoundingClientRect();

      ctx.lineTo(e.clientX - rect.left, e.clientY - rect.top);

      ctx.stroke();

      ctx.beginPath();

      ctx.moveTo(e.clientX - rect.left, e.clientY - rect.top);

    }



    // لمس على الجوال

    canvas.addEventListener("touchstart", (e) => {

      e.preventDefault();

      drawing = true;

    });

    canvas.addEventListener("touchend", () => drawing = false);

    canvas.addEventListener("touchcancel", () => drawing = false);

    canvas.addEventListener("touchmove", function (e) {

      e.preventDefault();

      const touch = e.touches[0];

      const rect = canvas.getBoundingClientRect();

      const x = touch.clientX - rect.left;

      const y = touch.clientY - rect.top;

      if (drawing) {

        ctx.lineTo(x, y);

        ctx.stroke();

        ctx.beginPath();

        ctx.moveTo(x, y);

      }

    });



    document.getElementById("pickupForm").addEventListener("submit", function (e) {

      e.preventDefault();

      alert("Pickup form submitted successfully!");

      // مستقبلاً نرسل البيانات إلى Google Sheet أو MySQL

    });

  </script>



</body>

</html>
