<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>

  <title>Book an Appointment | TailorMe</title>

  <link rel="stylesheet" href="appointment.css"/>

</head>

<body>

  <main class="tm-wrap">

    <h1 class="tm-title">Book an Appointment</h1>



    <form id="appointmentForm" class="tm-form" novalidate>

      <div class="grid">

        <label>

          <span>Full Name</span>

          <input id="name" name="name" type="text" required/>

        </label>



        <label>

          <span>Email</span>

          <input id="email" name="email" type="email" required/>

        </label>



        <label>

          <span>Phone</span>

          <input id="phone" name="phone" type="tel" required/>

        </label>



        <label class="wide">

          <span>Address</span>

          <input id="address" name="address" type="text" required/>

        </label>



        <label>

          <span>Service Type</span>

          <select id="service" name="service" required>

            <option value="">-- Select --</option>

            <option value="Alteration">Alteration</option>

            <option value="Custom Tailoring">Custom Tailoring</option>

          </select>

        </label>



        <label>

          <span>Number of Pieces</span>

          <input id="pieces" name="pieces" type="number" min="1" required/>

        </label>



        <label>

          <span>Pickup Date</span>

          <input id="pickup_date" name="pickup_date" type="date" required/>

        </label>



        <label>

          <span>Pickup Time</span>

          <input id="pickup_time" name="pickup_time" type="time" required/>

        </label>



        <label>

          <span>Delivery Date</span>

          <input id="delivery_date" name="delivery_date" type="date" required/>

        </label>



        <label>

          <span>Delivery Time</span>

          <input id="delivery_time" name="delivery_time" type="time" required/>

        </label>



        <label class="wide">

          <span>Additional Notes (optional)</span>

          <textarea id="notes" name="notes" rows="3"></textarea>

        </label>

      </div>



      <button class="tm-btn" type="submit" id="submitBtn">Submit Booking</button>

      <p id="formMsg" class="tm-msg" role="status" aria-live="polite"></p>

    </form>

  </main>



  <script>

  // === 1) غيّر هذا بالرابط الفعلي للـ Web App بعد النشر من Apps Script ===

  const WEB_APP_URL = "PASTE_YOUR_WEB_APP_URL_HERE";



  const form = document.getElementById('appointmentForm');

  const msg  = document.getElementById('formMsg');

  const btn  = document.getElementById('submitBtn');



  form.addEventListener('submit', async (e) => {

    e.preventDefault();

    msg.textContent = "";

    if (!form.checkValidity()) {

      msg.textContent = "Please fill all required fields.";

      return;

    }

    btn.disabled = true;

    btn.textContent = "Submitting...";



    const payload = {

      name: form.name.value.trim(),

      email: form.email.value.trim(),

      phone: form.phone.value.trim(),

      address: form.address.value.trim(),

      service: form.service.value,

      pieces: form.pieces.value,

      pickup_date: form.pickup_date.value,

      pickup_time: form.pickup_time.value,

      delivery_date: form.delivery_date.value,

      delivery_time: form.delivery_time.value,

      notes: form.notes.value.trim()

    };



    try {

      const res = await fetch(WEB_APP_URL, {

        method: "POST",

        headers: {"Content-Type": "application/json"},

        body: JSON.stringify(payload)

      });

      const data = await res.json();

      if (data?.ok) {

        msg.textContent = "✅ Booking received! A confirmation email has been sent.";

        form.reset();

      } else {

        msg.textContent = "⚠️ Submission succeeded but email may not have been sent.";

      }

    } catch (err) {

      console.error(err);

      msg.textContent = "❌ Network error. Please try again.";

    } finally {

      btn.disabled = false;

      btn.textContent = "Submit Booking";

    }

  });

  </script>

</body>

</html>
