<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>Book an Appointment – TailorMe</title>

  <link rel="stylesheet" href="appointment.css" />

</head>

<body>

  <header class="tm-header">

    <div class="brand">

      <img src="images/logo.png" alt="TailorMe Logo" class="brand-logo" />

      <span class="brand-name">TailorMe</span>

    </div>

  </header>



  <main class="form-wrap">

    <h1 class="form-title">Book an Appointment (Pickup)</h1>



    <form id="appointmentForm" novalidate>

      <!-- Contact -->

      <div class="field">

        <label for="email">Email<span>*</span></label>

        <input type="email" id="email" name="email" placeholder="you@example.com" required />

      </div>



      <div class="field">

        <label for="name">Full Name<span>*</span></label>

        <input type="text" id="name" name="name" placeholder="John Doe" required />

      </div>



      <div class="field">

        <label for="phone">Phone<span>*</span></label>

        <input type="tel" id="phone" name="phone" placeholder="(502) 123-4567" required />

      </div>



      <div class="field">

        <label for="address">Address<span>*</span></label>

        <input type="text" id="address" name="address" placeholder="123 Main St, Louisville, KY" required />

      </div>



      <!-- Service -->

      <div class="field">

        <label for="service">Service Type<span>*</span></label>

        <select id="service" name="service" required>

          <option value="">— Select —</option>

          <option value="Alteration">Alteration</option>

          <option value="Custom">Custom</option>

        </select>

      </div>



      <div class="field">

        <label for="pieces">Number of Pieces<span>*</span></label>

        <input type="number" id="pieces" name="pieces" min="1" step="1" placeholder="1" required />

      </div>



      <!-- Pickup only -->

      <div class="field two-col">

        <div>

          <label for="pickup_date">Pickup Date<span>*</span></label>

          <input type="date" id="pickup_date" name="pickup_date" required />

        </div>

        <div>

          <label for="pickup_time">Pickup Time<span>*</span></label>

          <input type="time" id="pickup_time" name="pickup_time" required />

        </div>

      </div>



      <div class="field">

        <label for="notes">Additional Notes (optional)</label>

        <textarea id="notes" name="notes" rows="3" placeholder="E.g., hem 2cm, taper legs..."></textarea>

      </div>



      <button id="submitBtn" type="submit" class="btn-primary">Submit Booking</button>



      <p id="formStatus" class="form-status" aria-live="polite"></p>

    </form>

  </main>



  <footer class="tm-footer">

    <p>© <span id="year"></span> TailorMe — Mobile Alterations & Custom Tailoring</p>

  </footer>



  <script>

    // ضع رابط الWeb App الخاص بGoogle Apps Script هنا

    const WEB_APP_URL = 'https://script.google.com/macros/s/PASTE_YOUR_WEB_APP_ID/exec';



    document.getElementById('year').textContent = new Date().getFullYear();



    const form = document.getElementById('appointmentForm');

    const statusEl = document.getElementById('formStatus');

    const submitBtn = document.getElementById('submitBtn');



    function setStatus(msg, ok = true) {

      statusEl.textContent = msg;

      statusEl.className = 'form-status ' + (ok ? 'ok' : 'err');

    }



    form.addEventListener('submit', async (e) => {

      e.preventDefault();

      if (!form.checkValidity()) {

        setStatus('Please fill all required fields correctly.', false);

        return;

      }



      submitBtn.disabled = true;

      setStatus('Submitting… please wait.');



      const payload = {

        email: form.email.value.trim(),

        name: form.name.value.trim(),

        phone: form.phone.value.trim(),

        address: form.address.value.trim(),

        service: form.service.value,

        pieces: form.pieces.value,

        pickup_date: form.pickup_date.value,

        pickup_time: form.pickup_time.value,

        notes: form.notes.value.trim()

      };



      try {

        const res = await fetch(WEB_APP_URL, {

          method: 'POST',

          mode: 'no-cors', // يسمح بالإرسال حتى لو ما في CORS

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(payload)

        });



        // بما أن no-cors لا يرجّع رد واضح، نعرض نجاح مبدئي

        setStatus('Thank you! Your booking was received. A confirmation will be emailed to you shortly.');

        form.reset();

      } catch (err) {

        console.error(err);

        setStatus('Submission failed. Please try again or contact us at contact@tailorme.me.', false);

      } finally {

        submitBtn.disabled = false;

      }

    });

  </script>

</body>

</html>
