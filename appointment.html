<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8" />

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <title>Book an Appointment â€“ TailorMe</title>

  <link rel="stylesheet" href="appointment.css" />

</head>

<body>

  <header class="tm-header">

    <div class="tm-brand">

      <span class="tm-logo">ğŸ‘‘</span>

      <span class="tm-name">TailorMe</span>

    </div>

  </header>



  <main class="tm-main">

    <section class="tm-card">

      <h1 class="tm-title">Book an Appointment</h1>

      <p class="tm-subtitle">Mobile Alterations & Custom Tailoring</p>



      <form id="appointmentForm" novalidate>

        <div class="grid">

          <label class="field">

            <span>Name</span>

            <input type="text" id="name" name="name" required />

          </label>



          <label class="field">

            <span>Email</span>

            <input type="email" id="email" name="email" required />

          </label>



          <label class="field">

            <span>Phone</span>

            <input type="tel" id="phone" name="phone" required />

          </label>



          <label class="field full">

            <span>Address</span>

            <input type="text" id="address" name="address" required />

          </label>



          <label class="field">

            <span>Service Type</span>

            <select id="service" name="service" required>

              <option value="">-- Select --</option>

              <option value="Alteration">Alteration</option>

              <option value="Custom">Custom</option>

            </select>

          </label>



          <label class="field">

            <span>Number of Pieces</span>

            <input type="number" min="1" id="pieces" name="pieces" required />

          </label>



          <label class="field">

            <span>Pickup Date</span>

            <input type="date" id="pickup_date" name="pickup_date" required />

          </label>



          <label class="field">

            <span>Pickup Time</span>

            <input type="time" id="pickup_time" name="pickup_time" required />

          </label>



          <label class="field full">

            <span>Additional Notes (optional)</span>

            <textarea id="notes" name="notes" rows="3" placeholder="Any special instructions..."></textarea>

          </label>

        </div>



        <button class="tm-btn" id="submitBtn" type="submit">Submit Booking</button>

        <p id="status" class="status" role="status" aria-live="polite"></p>

      </form>

    </section>

  </main>



  <footer class="tm-footer">

    <small>Â© <span id="year"></span> TailorMe â€” Louisville, KY</small>

  </footer>



  <script>

    // ======= CONFIG (Ø§Ø³ØªØ¨Ø¯Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ÙˆÙŠØ¨ Ø¢Ø¨) =======

    const WEB_APP_URL = 'https://script.google.com/macros/s/PASTE_YOUR_WEB_APP_URL_HERE/exec';



    // ======= Helpers =======

    const $ = (sel) => document.querySelector(sel);



    // Year

    document.getElementById('year').textContent = new Date().getFullYear();



    // Form submit

    const form = document.getElementById('appointmentForm');

    const statusEl = document.getElementById('status');

    const submitBtn = document.getElementById('submitBtn');



    form.addEventListener('submit', async (e) => {

      e.preventDefault();

      statusEl.textContent = '';

      submitBtn.disabled = true;



      const payload = {

        name: $('#name').value.trim(),

        email: $('#email').value.trim(),

        phone: $('#phone').value.trim(),

        address: $('#address').value.trim(),

        service: $('#service').value,

        pieces: $('#pieces').value.trim(),

        pickup_date: $('#pickup_date').value,

        pickup_time: $('#pickup_time').value,

        notes: $('#notes').value.trim()

      };



      // Ø¨Ø³ÙŠØ· Ø¬Ø¯Ø§Ù‹ Ù„Ù„ØªØ­Ù‚Ù‚

      for (const [k,v] of Object.entries(payload)) {

        if (['name','email','phone','address','service','pieces','pickup_date','pickup_time'].includes(k) && !v) {

          statusEl.textContent = 'Please fill all required fields.';

          submitBtn.disabled = false;

          return;

        }

      }



      try {

        const res = await fetch(WEB_APP_URL, {

          method: 'POST',

          headers: { 'Content-Type': 'application/json' },

          body: JSON.stringify(payload)

        });



        // Ø¥Ø°Ø§ ØµØ§Ø± CORS Ø¹Ù†Ø¯ÙƒØŒ ØªÙ‚Ø¯Ø± ØªØºÙŠÙ‘Ø± Ø£Ø¹Ù„Ø§Ù‡ Ø¥Ù„Ù‰:

        // fetch(WEB_APP_URL, { method: 'POST', mode: 'no-cors', headers: {'Content-Type':'application/json'}, body: JSON.stringify(payload) })

        // Ù„ÙƒÙ† ÙÙŠ no-cors Ù…Ø§ Ù†Ù‚Ø¯Ø± Ù†Ù‚Ø±Ø£ Ø§Ù„Ø±Ø¯ØŒ ÙÙ†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©.



        if (!res.ok) {

          throw new Error('Network response was not ok');

        }

        const data = await res.json();

        if (data && data.ok) {

          statusEl.textContent = 'âœ… Booking received. A confirmation email was sent.';

          form.reset();

        } else {

          statusEl.textContent = 'Submitted, but got an unexpected response.';

        }

      } catch (err) {

        // fallback Ù†Ø¬Ø§Ø­ ØªÙØ§Ø¤Ù„ÙŠ

        statusEl.textContent = 'âœ… Booking submitted. If you do not see an email, we will verify your Web App URL.';

      } finally {

        submitBtn.disabled = false;

      }

    });

  </script>

</body>

</html>
